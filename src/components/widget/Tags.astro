---
import WidgetLayout from './WidgetLayout.astro';
import ButtonTag from '../ui/ButtonTag.astro';
import { getTagList } from '../../utils/content-utils';

const tags = await getTagList();

const COLLAPSED_HEIGHT = '120px';

interface Props {
	class?: string;
	isCollapsed?: boolean;
}

const { class: className, isCollapsed = true } = Astro.props;
---

<WidgetLayout
	id="tags-widget"
	name="Tags"
	class={className}
	isCollapsed={isCollapsed}
	collapsedHeight={COLLAPSED_HEIGHT}
>
	<div class="flex flex-wrap gap-2">
		{tags.map((tag) => (
			<ButtonTag
				href={`/posts?tag=${encodeURIComponent(tag.name)}`}
				label={`View all posts with the ${tag.name} tag`}
				count={tag.count}
			>
				{tag.name}
			</ButtonTag>
		))}
	</div>
</WidgetLayout>
